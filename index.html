<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Element Defender Â· í”„ë¡œí•„ í¬í•¨</title>
  <meta name="description" content="ë¬¼Â·ë¶ˆÂ·ë‚˜ë¬´Â·ë•… 4ì†ì„± ë°©ì–´ ê²Œì„ + í”„ë¡œí•„ ì´ë¯¸ì§€" />
  <style>
    :root{
      --bg:#0b0c0f;
      --fg:#e5e7eb;
      --muted:#9ca3af;
      --line:#1f2937;
      --water:#38bdf8;
      --fire:#ef4444;
      --wood:#22c55e;
      --earth:#facc15;
    }
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,"Noto Sans KR";background:var(--bg);color:var(--fg);}
    .wrap{max-width:900px;margin:0 auto;padding:20px;text-align:center}
    canvas{background:radial-gradient(circle at center,rgba(255,255,255,.05),transparent 80%);border:1px solid var(--line);border-radius:8px;display:block;margin:0 auto}
    .btn{margin:6px;padding:10px 16px;border:1px solid var(--line);border-radius:8px;background:#111827;color:var(--fg);cursor:pointer;font-weight:600}
    .guide{font-size:24px;font-weight:700;margin-top:16px;color:var(--muted);}
    .footer{color:var(--muted);font-size:13px;margin-top:12px}
    .profile{display:flex;flex-direction:column;align-items:center;gap:8px;margin-bottom:24px;}
    .profile img{width:120px;height:120px;border-radius:50%;object-fit:cover;border:3px solid var(--line);}
    .profile h2{margin:0;font-size:20px;color:var(--fg);}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="profile">
      <img src="image/ì½”ë¼ë¦¬ ì´ë¯¸ì§€2.jpg" alt="í”„ë¡œí•„ ì´ë¯¸ì§€" />
      <h2>ì˜¤ì¢…í™˜</h2>
    </div>

    <h1>Element Defender ğŸ’§ğŸ”¥ğŸŒ³ğŸª¨</h1>
    <p>ë¬¼ Â· ë¶ˆ Â· ë‚˜ë¬´ Â· ë•… 4ì†ì„±ì„ ì´ìš©í•´ íƒ€ì›Œë¥¼ ì§€ì¼œë¼!<br>ì±•í„° 1ë¶€í„° 10ê¹Œì§€ ì ì  ì–´ë ¤ì›Œì§€ëŠ” ë‚œì´ë„!</p>
    <div class="guide">Q â†’ ğŸ’§ ë¬¼â€ƒâ€ƒW â†’ ğŸ”¥ ë¶ˆâ€ƒâ€ƒE â†’ ğŸŒ³ ë‚˜ë¬´â€ƒâ€ƒR â†’ ğŸª¨ ë•…</div>

    <canvas id="game" width="640" height="480"></canvas>
    <div>
      <button class="btn" id="startBtn">ê²Œì„ ì‹œì‘</button>
      <button class="btn" id="nextBtn" disabled>ë‹¤ìŒ ì±•í„°</button>
      <button class="btn" id="restartBtn">ë‹¤ì‹œí•˜ê¸°</button>
    </div>
    <div class="footer">ê° ì†ì„±ì€ ìê¸° ìì‹ ì˜ ê³µê²©ì„ ë§‰ìŠµë‹ˆë‹¤ (ë¬¼ì€ ë¬¼ë¡œ, ë¶ˆì€ ë¶ˆë¡œ, ë‚˜ë¬´ëŠ” ë‚˜ë¬´ë¡œ, ë•…ì€ ë•…ìœ¼ë¡œ ë°©ì–´)</div>
  </div>

  <script>
  ;(()=>{
    const cvs=document.getElementById('game');
    const ctx=cvs.getContext('2d');
    const CENTER={x:cvs.width/2,y:cvs.height/2};
    const elements=[
      {key:'water',label:'ë¬¼',color:getComputedStyle(document.documentElement).getPropertyValue('--water').trim(),keyBind:'q'},
      {key:'fire',label:'ë¶ˆ',color:getComputedStyle(document.documentElement).getPropertyValue('--fire').trim(),keyBind:'w'},
      {key:'wood',label:'ë‚˜ë¬´',color:getComputedStyle(document.documentElement).getPropertyValue('--wood').trim(),keyBind:'e'},
      {key:'earth',label:'ë•…',color:getComputedStyle(document.documentElement).getPropertyValue('--earth').trim(),keyBind:'r'}
    ];

    let chapter=1,maxChapter=10,hp=100,projectiles=[],running=false;

    function resetGame(){projectiles=[];hp=100;running=false;chapter=1;document.getElementById('nextBtn').disabled=true;render();}
    function startChapter(){running=true;spawnLoop();}

    function spawnLoop(){if(!running)return;spawnProjectile();const interval=Math.max(1600-120*chapter,900);setTimeout(spawnLoop,interval);}

    function spawnProjectile(){
      const el=elements[Math.floor(Math.random()*elements.length)];
      const angle=Math.random()*Math.PI*2;
      const radius=Math.max(cvs.width,cvs.height)/2+20;
      const x=CENTER.x+Math.cos(angle)*radius;
      const y=CENTER.y+Math.sin(angle)*radius;
      const speed=0.6+chapter*0.15;
      const dx=(CENTER.x-x)/Math.hypot(CENTER.x-x,CENTER.y-y)*speed;
      const dy=(CENTER.y-y)/Math.hypot(CENTER.x-x,CENTER.y-y)*speed;
      projectiles.push({x,y,dx,dy,color:el.color,type:el.key});
    }

    function update(){if(!running)return;projectiles.forEach(p=>{p.x+=p.dx;p.y+=p.dy;});projectiles=projectiles.filter(p=>!isHit(p));if(hp<=0){running=false;document.getElementById('nextBtn').disabled=false;}}

    function isHit(p){const dist=Math.hypot(p.x-CENTER.x,p.y-CENTER.y);if(dist<20){hp=Math.max(0,hp-10);return true;}return false;}

    function render(){ctx.clearRect(0,0,cvs.width,cvs.height);ctx.beginPath();ctx.arc(CENTER.x,CENTER.y,20,0,Math.PI*2);ctx.fillStyle='#fff';ctx.fill();projectiles.forEach(p=>{ctx.beginPath();ctx.arc(p.x,p.y,6,0,Math.PI*2);ctx.fillStyle=p.color;ctx.fill();});ctx.fillStyle='white';ctx.font='16px system-ui';ctx.fillText(`ì±•í„° ${chapter} / ${maxChapter}`,20,20);ctx.fillText(`HP: ${hp}`,20,40);}

    function loop(){update();render();requestAnimationFrame(loop);}loop();

    document.addEventListener('keydown',e=>{const k=e.key.toLowerCase();if(['q','w','e','r'].includes(k)){const el=elements.find(el=>el.keyBind===k);if(el){defend(el.key);flashKey(el.label);}}});

    function defend(type){projectiles.forEach(p=>{const dist=Math.hypot(p.x-CENTER.x,p.y-CENTER.y);if(dist<80 && p.type===type){p.x=-9999;}});}

    function flashKey(label){const g=document.querySelector('.guide');g.textContent=`${label} ë°©ì–´!`;setTimeout(()=>{g.innerHTML='Q â†’ ğŸ’§ ë¬¼â€ƒâ€ƒW â†’ ğŸ”¥ ë¶ˆâ€ƒâ€ƒE â†’ ğŸŒ³ ë‚˜ë¬´â€ƒâ€ƒR â†’ ğŸª¨ ë•…';},600);}

    document.getElementById('startBtn').onclick=()=>{running=true;startChapter();};
    document.getElementById('restartBtn').onclick=()=>{resetGame();};
    document.getElementById('nextBtn').onclick=()=>{if(chapter<maxChapter){chapter++;running=true;projectiles=[];hp=100;startChapter();if(chapter===maxChapter)document.getElementById('nextBtn').disabled=true;}};
  })();
  </script>
</body>
</html>
